<h3>Bars from categorical data</h3>

<p>Bar plots with categorical data can make use of hierachical
  division of the data categories by zipping together multiple data
  vectors and using the <code>GROUP-X</code> attribute to control the
  way that these are grouped together.</p>

<p>An alternative to the standard aggregation by mean for categorical
  data is to plot box-and-whisker plots using
  the <code>&lt;boxes&gt;</code> directive.</p>

<palette name="irispal" type="discrete">
  "I. setosa" red
  "I. versicolor" green
  "I. virginica" blue
</palette>

<palette name="mfpal" type="discrete">
  female #FF7F7F; male #7F7FFF
</palette>

<palette name="urpal" type="discrete">
  rural #10520D; urban #505050
</palette>

<plot-stack height=600 aspect=1.5>
  <plot title="Simple bars" axis-x-label="off"
        axis-y-label="Rate" stroke="none">
    <bars x="[[d1#sex]]" y="[[d1#rate]]" fill="[[mfpal(x)]]"
          aggregation="mean" bar-width=0.5></bars>
  </plot>
  <plot title="Hierarchical bars 1" axis-x-label="off"
        axis-y-label="Rate" group-x=1>
    <bars x="[[zip(d1#sex,d1#age)]]" y="[[d1#rate]]"
          aggregation="mean" fill="[[mfpal(d1#sex)]]"
          axis-x-labels="[[d1#age]]"></bars>
  </plot>
  <plot title="Hierarchical bars 2" axis-x-label="off"
        axis-y-label="Rate" group-x=1>
    <bars x="[[zip(d1#age,d1#sex)]]" y="[[d1#rate]]"
          aggregation="mean" fill="[[mfpal(d1#sex)]]"></bars>
  </plot>
  <plot title="Box plot" axis-x-label="Species" axis-y-label="Petal length">
    <boxes x="[[iris.species]]" y="[[iris.petal_length]]"
           stroke="[[irispal(iris.species)]]">
    </boxes>
  </plot>
</plot-stack>
<br>

<plot-data name="d1">
  <metadata name="sex" category-order="male;female"></metadata>
  <metadata name="env" category-order="urban;rural"></metadata>
  <metadata name="age" category-order="50-54;55-59;60-64;65-69;70-74">
  </metadata>
  [ { "sex": "female", "env": "rural", "age": "50-54", "rate": 15.5 },
    { "sex": "female", "env": "rural", "age": "55-59", "rate": 20.2 },
    { "sex": "female", "env": "rural", "age": "60-64", "rate": 32.1 },
    { "sex": "female", "env": "rural", "age": "65-69", "rate": 48.0 },
    { "sex": "female", "env": "rural", "age": "70-74", "rate": 65.5 },
    { "sex": "female", "env": "urban", "age": "50-54", "rate": 15.5 },
    { "sex": "female", "env": "urban", "age": "55-59", "rate": 20.2 },
    { "sex": "female", "env": "urban", "age": "60-64", "rate": 32.1 },
    { "sex": "female", "env": "urban", "age": "65-69", "rate": 48.0 },
    { "sex": "female", "env": "urban", "age": "70-74", "rate": 65.5 },
    { "sex": "male", "env": "rural", "age": "50-54", "rate": 17.5 },
    { "sex": "male", "env": "rural", "age": "55-59", "rate": 21.2 },
    { "sex": "male", "env": "rural", "age": "60-64", "rate": 37.1 },
    { "sex": "male", "env": "rural", "age": "65-69", "rate": 49.0 },
    { "sex": "male", "env": "rural", "age": "70-74", "rate": 66.5 },
    { "sex": "male", "env": "urban", "age": "50-54", "rate": 18.5 },
    { "sex": "male", "env": "urban", "age": "55-59", "rate": 23.2 },
    { "sex": "male", "env": "urban", "age": "60-64", "rate": 35.1 },
    { "sex": "male", "env": "urban", "age": "65-69", "rate": 49.0 },
    { "sex": "male", "env": "urban", "age": "70-74", "rate": 67.5 } ]
</plot-data>

<plot-data name="iris" format="csv"
           cols="sepal_length,sepal_width,petal_length,petal_width,species">
  <metadata name="species"
            category-order="I. setosa;I. versicolor;I. virginica"></metadata>
5.1,3.5,1.4,0.2,I. setosa
4.9,3.0,1.4,0.2,I. setosa
4.7,3.2,1.3,0.2,I. setosa
4.6,3.1,1.5,0.2,I. setosa
5.0,3.6,1.4,0.2,I. setosa
5.4,3.9,1.7,0.4,I. setosa
4.6,3.4,1.4,0.3,I. setosa
5.0,3.4,1.5,0.2,I. setosa
4.4,2.9,1.4,0.2,I. setosa
4.9,3.1,1.5,0.1,I. setosa
5.4,3.7,1.5,0.2,I. setosa
4.8,3.4,1.6,0.2,I. setosa
4.8,3.0,1.4,0.1,I. setosa
4.3,3.0,1.1,0.1,I. setosa
5.8,4.0,1.2,0.2,I. setosa
5.7,4.4,1.5,0.4,I. setosa
5.4,3.9,1.3,0.4,I. setosa
5.1,3.5,1.4,0.3,I. setosa
5.7,3.8,1.7,0.3,I. setosa
5.1,3.8,1.5,0.3,I. setosa
5.4,3.4,1.7,0.2,I. setosa
5.1,3.7,1.5,0.4,I. setosa
4.6,3.6,1.0,0.2,I. setosa
5.1,3.3,1.7,0.5,I. setosa
4.8,3.4,1.9,0.2,I. setosa
5.0,3.0,1.6,0.2,I. setosa
5.0,3.4,1.6,0.4,I. setosa
5.2,3.5,1.5,0.2,I. setosa
5.2,3.4,1.4,0.2,I. setosa
4.7,3.2,1.6,0.2,I. setosa
4.8,3.1,1.6,0.2,I. setosa
5.4,3.4,1.5,0.4,I. setosa
5.2,4.1,1.5,0.1,I. setosa
5.5,4.2,1.4,0.2,I. setosa
4.9,3.1,1.5,0.2,I. setosa
5.0,3.2,1.2,0.2,I. setosa
5.5,3.5,1.3,0.2,I. setosa
4.9,3.6,1.4,0.1,I. setosa
4.4,3.0,1.3,0.2,I. setosa
5.1,3.4,1.5,0.2,I. setosa
5.0,3.5,1.3,0.3,I. setosa
4.5,2.3,1.3,0.3,I. setosa
4.4,3.2,1.3,0.2,I. setosa
5.0,3.5,1.6,0.6,I. setosa
5.1,3.8,1.9,0.4,I. setosa
4.8,3.0,1.4,0.3,I. setosa
5.1,3.8,1.6,0.2,I. setosa
4.6,3.2,1.4,0.2,I. setosa
5.3,3.7,1.5,0.2,I. setosa
5.0,3.3,1.4,0.2,I. setosa
7.0,3.2,4.7,1.4,I. versicolor
6.4,3.2,4.5,1.5,I. versicolor
6.9,3.1,4.9,1.5,I. versicolor
5.5,2.3,4.0,1.3,I. versicolor
6.5,2.8,4.6,1.5,I. versicolor
5.7,2.8,4.5,1.3,I. versicolor
6.3,3.3,4.7,1.6,I. versicolor
4.9,2.4,3.3,1.0,I. versicolor
6.6,2.9,4.6,1.3,I. versicolor
5.2,2.7,3.9,1.4,I. versicolor
5.0,2.0,3.5,1.0,I. versicolor
5.9,3.0,4.2,1.5,I. versicolor
6.0,2.2,4.0,1.0,I. versicolor
6.1,2.9,4.7,1.4,I. versicolor
5.6,2.9,3.6,1.3,I. versicolor
6.7,3.1,4.4,1.4,I. versicolor
5.6,3.0,4.5,1.5,I. versicolor
5.8,2.7,4.1,1.0,I. versicolor
6.2,2.2,4.5,1.5,I. versicolor
5.6,2.5,3.9,1.1,I. versicolor
5.9,3.2,4.8,1.8,I. versicolor
6.1,2.8,4.0,1.3,I. versicolor
6.3,2.5,4.9,1.5,I. versicolor
6.1,2.8,4.7,1.2,I. versicolor
6.4,2.9,4.3,1.3,I. versicolor
6.6,3.0,4.4,1.4,I. versicolor
6.8,2.8,4.8,1.4,I. versicolor
6.7,3.0,5.0,1.7,I. versicolor
6.0,2.9,4.5,1.5,I. versicolor
5.7,2.6,3.5,1.0,I. versicolor
5.5,2.4,3.8,1.1,I. versicolor
5.5,2.4,3.7,1.0,I. versicolor
5.8,2.7,3.9,1.2,I. versicolor
6.0,2.7,5.1,1.6,I. versicolor
5.4,3.0,4.5,1.5,I. versicolor
6.0,3.4,4.5,1.6,I. versicolor
6.7,3.1,4.7,1.5,I. versicolor
6.3,2.3,4.4,1.3,I. versicolor
5.6,3.0,4.1,1.3,I. versicolor
5.5,2.5,4.0,1.3,I. versicolor
5.5,2.6,4.4,1.2,I. versicolor
6.1,3.0,4.6,1.4,I. versicolor
5.8,2.6,4.0,1.2,I. versicolor
5.0,2.3,3.3,1.0,I. versicolor
5.6,2.7,4.2,1.3,I. versicolor
5.7,3.0,4.2,1.2,I. versicolor
5.7,2.9,4.2,1.3,I. versicolor
6.2,2.9,4.3,1.3,I. versicolor
5.1,2.5,3.0,1.1,I. versicolor
5.7,2.8,4.1,1.3,I. versicolor
6.3,3.3,6.0,2.5,I. virginica
5.8,2.7,5.1,1.9,I. virginica
7.1,3.0,5.9,2.1,I. virginica
6.3,2.9,5.6,1.8,I. virginica
6.5,3.0,5.8,2.2,I. virginica
7.6,3.0,6.6,2.1,I. virginica
4.9,2.5,4.5,1.7,I. virginica
7.3,2.9,6.3,1.8,I. virginica
6.7,2.5,5.8,1.8,I. virginica
7.2,3.6,6.1,2.5,I. virginica
6.5,3.2,5.1,2.0,I. virginica
6.4,2.7,5.3,1.9,I. virginica
6.8,3.0,5.5,2.1,I. virginica
5.7,2.5,5.0,2.0,I. virginica
5.8,2.8,5.1,2.4,I. virginica
6.4,3.2,5.3,2.3,I. virginica
6.5,3.0,5.5,1.8,I. virginica
7.7,3.8,6.7,2.2,I. virginica
7.7,2.6,6.9,2.3,I. virginica
6.0,2.2,5.0,1.5,I. virginica
6.9,3.2,5.7,2.3,I. virginica
5.6,2.8,4.9,2.0,I. virginica
7.7,2.8,6.7,2.0,I. virginica
6.3,2.7,4.9,1.8,I. virginica
6.7,3.3,5.7,2.1,I. virginica
7.2,3.2,6.0,1.8,I. virginica
6.2,2.8,4.8,1.8,I. virginica
6.1,3.0,4.9,1.8,I. virginica
6.4,2.8,5.6,2.1,I. virginica
7.2,3.0,5.8,1.6,I. virginica
7.4,2.8,6.1,1.9,I. virginica
7.9,3.8,6.4,2.0,I. virginica
6.4,2.8,5.6,2.2,I. virginica
6.3,2.8,5.1,1.5,I. virginica
6.1,2.6,5.6,1.4,I. virginica
7.7,3.0,6.1,2.3,I. virginica
6.3,3.4,5.6,2.4,I. virginica
6.4,3.1,5.5,1.8,I. virginica
6.0,3.0,4.8,1.8,I. virginica
6.9,3.1,5.4,2.1,I. virginica
6.7,3.1,5.6,2.4,I. virginica
6.9,3.1,5.1,2.3,I. virginica
5.8,2.7,5.1,1.9,I. virginica
6.8,3.2,5.9,2.3,I. virginica
6.7,3.3,5.7,2.5,I. virginica
6.7,3.0,5.2,2.3,I. virginica
6.3,2.5,5.0,1.9,I. virginica
6.5,3.0,5.2,2.0,I. virginica
6.2,3.4,5.4,2.3,I. virginica
5.9,3.0,5.1,1.8,I. virginica
</plot-data>
